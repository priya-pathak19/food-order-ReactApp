{"ast":null,"code":"import _slicedToArray from\"E:/work github/food-order-ReactApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _toConsumableArray from\"E:/work github/food-order-ReactApp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import React,{useReducer}from'react';import Context from'./context';import{jsx as _jsx}from\"react/jsx-runtime\";var Provider=function Provider(props){var defaultState={items:[],totalAmount:0};var cartReducer=function cartReducer(state,action){if(action.type===\"ADD\"){var updatedItems;var index=state.items.findIndex(function(el){return el.id===action.item.id;});if(index===-1){updatedItems=[].concat(_toConsumableArray(state.items),[action.item]);}else{updatedItems=_toConsumableArray(state.items);updatedItems[index].amount+=action.item.amount;}return{items:updatedItems,totalAmount:state.totalAmount+action.item.price*action.item.amount};}if(action.type===\"REMOVE\"){var _updatedItems;var _index=state.items.findIndex(function(el){return el.id===action.id;});if(state.items[_index].amount===1){_updatedItems=state.items.filter(function(el){return el.id!==action.id;});}else{_updatedItems=_toConsumableArray(state.items);_updatedItems[_index].amount-=1;}return{items:_updatedItems,totalAmount:state.totalAmount-state.items[_index].price};}return defaultState;};var _useReducer=useReducer(cartReducer,defaultState),_useReducer2=_slicedToArray(_useReducer,2),cartState=_useReducer2[0],dispatch=_useReducer2[1];var addItems=function addItems(item){dispatch({type:\"ADD\",item:item});};var removeItems=function removeItems(id){dispatch({type:\"REMOVE\",id:id});};var clearCart=function clearCart(item,id){dispatch({type:\"CLEAR\",id:id,item:item});};var newContext={items:cartState.items,totalAmount:cartState.totalAmount,addItems:addItems,removeItems:removeItems,clearCart:clearCart};return/*#__PURE__*/_jsx(Context.Provider,{value:newContext,children:props.children});};export default Provider;","map":{"version":3,"sources":["E:/work github/food-order-ReactApp/src/store/provider.js"],"names":["React","useReducer","Context","Provider","props","defaultState","items","totalAmount","cartReducer","state","action","type","updatedItems","index","findIndex","el","id","item","amount","price","filter","cartState","dispatch","addItems","removeItems","clearCart","newContext","children"],"mappings":"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","sourcesContent":["import React, { useReducer } from 'react';\r\nimport Context from './context';\r\n\r\n\r\nconst Provider = props =>{\r\n\r\n    const defaultState= {\r\n        items:[],\r\n        totalAmount:0\r\n    }\r\n\r\n    const cartReducer = (state, action)=>{\r\n\r\n        if (action.type === \"ADD\") {\r\n            let updatedItems;\r\n            const index = state.items.findIndex(el => el.id === action.item.id);\r\n            if (index === -1) {\r\n               updatedItems = [...state.items, action.item];\r\n            } else {\r\n               updatedItems = [...state.items];\r\n               updatedItems[index].amount += action.item.amount;\r\n            }\r\n       \r\n            return {\r\n               items: updatedItems,\r\n               totalAmount: state.totalAmount + action.item.price * action.item.amount\r\n            };\r\n         }\r\n         if (action.type === \"REMOVE\") {\r\n            let updatedItems;\r\n            const index = state.items.findIndex(el => el.id === action.id);\r\n            if (state.items[index].amount === 1) {\r\n               updatedItems = state.items.filter(el => el.id !== action.id);\r\n            } else {\r\n               updatedItems = [...state.items];\r\n               updatedItems[index].amount -= 1;\r\n            }\r\n       \r\n            return {\r\n               items: updatedItems,\r\n               totalAmount: state.totalAmount - state.items[index].price\r\n            };\r\n         }\r\n          return defaultState;\r\n        };\r\n        \r\n    const [cartState, dispatch ]= useReducer(cartReducer, defaultState);\r\n\r\n    const addItems = (item)=>{\r\n        dispatch({type:\"ADD\", item:item})\r\n    }\r\n\r\n    const removeItems = (id)=>{\r\n        dispatch({type:\"REMOVE\", id: id})\r\n    }\r\n\r\n    const clearCart = (item , id)=>{\r\n        dispatch({type:\"CLEAR\", id: id , item : item})\r\n    }\r\n\r\n    const newContext = {\r\n        items: cartState.items,\r\n        totalAmount: cartState.totalAmount,\r\n        addItems:  addItems,\r\n        removeItems: removeItems,\r\n        clearCart : clearCart,\r\n    };\r\n\r\n    return (\r\n        <Context.Provider value={newContext}>\r\n             {props.children}\r\n        </Context.Provider>\r\n    )\r\n}\r\n\r\n\r\n\r\nexport default Provider;"]},"metadata":{},"sourceType":"module"}